var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,s=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,o=(e,t)=>{for(var a in t||(t={}))n.call(t,a)&&s(e,a,t[a]);if(r)for(var a of r(t))l.call(t,a)&&s(e,a,t[a]);return e},c=(e,r)=>t(e,a(r)),i=(e,t)=>{var a={};for(var s in e)n.call(e,s)&&t.indexOf(s)<0&&(a[s]=e[s]);if(null!=e&&r)for(var s of r(e))t.indexOf(s)<0&&l.call(e,s)&&(a[s]=e[s]);return a};import{C as m,R as u,M as d,F as p,c as E,B as g,u as v,T as _,a as f,A as h,b,d as y,e as S,S as N,l as w,f as k,L as C,g as x,P as I,h as L,i as O,j as P,k as D,m as j,n as B,o as F,p as M}from"./vendor.3c3f5f04.js";function T(e){const[t,a]=m.exports.useState(n());m.exports.useEffect((()=>(window.addEventListener("login-update",r),()=>{window.removeEventListener("login-update",r)})),[]);const r=()=>{a(n())};function n(){var t;return null!=(t=sessionStorage.getItem(e))?t:""}function l(t){a(null!=t?t:""),function(e,t){const a=new Event("login-update");sessionStorage.setItem(e,null!=t?t:""),window.dispatchEvent(a)}(e,t)}return{value:t,setStorage:l,clearStorage:function(){l(""),sessionStorage.removeItem(e)}}}var A="_modal_16i5p_10",W="_paper_16i5p_16";const Y=e=>{var t=e,{children:a,className:r}=t,n=i(t,["children","className"]);return u.createElement(d,c(o({closeAfterTransition:!0},n),{className:A}),u.createElement(p,{in:n.open,timeout:300},u.createElement("div",{className:E(W,r)},a)))};var $="_title_dcxdt_10",q="_login_dcxdt_17",R="_input_dcxdt_17";var J={};const K=e=>{var t=e,{className:a,children:r}=t,n=i(t,["className","children"]);return u.createElement(g,c(o({},n),{classes:{root:E(J.button,a)},variant:"contained",color:"primary"}),r)},Q=()=>{const{value:e,setStorage:t}=T("app-username"),{setBackground:a}=function(){const[e,t]=m.exports.useState("");return{background:e,setBackground:function(e){document.querySelector("body").style.backgroundImage=`url(${e})`,t(e)}}}(),[r,n]=m.exports.useState(""),l=v();m.exports.useEffect((()=>{e&&l.push("/")}),[]);const[s,o]=m.exports.useState(!1);m.exports.useEffect((()=>(o(!0),a("/omdb-search/assets/login_background.f2b1f3da.jpg"),()=>{a("")})),[]);const c=()=>{t(r.trim()),l.push("/")};return u.createElement(Y,{open:s,disableBackdropClick:!0,hideBackdrop:!0},u.createElement("div",{className:q},u.createElement("h2",{className:$},"Welcome to OMDb Client :)"),u.createElement("form",{onSubmit:e=>(e=>{e.preventDefault(),c()})(e)},u.createElement("div",null,u.createElement(_,{type:"username",value:r,placeholder:"What should everyone call you?",onChange:e=>n(e.target.value),label:"Username",className:R})),u.createElement(K,{onClick:c,disabled:!r,type:"submit"},"Continue"),u.createElement("small",null,"This tool is powered by ",u.createElement("a",{href:"https://www.omdbapi.com/",target:"_blank"},"OMDB API")))))};const U=async function({url:e,params:t,config:a}){return(await f.get(e,o({params:t},a))).data},V="https://www.omdbapi.com/",z=({title:e,imdbID:t,plot:a,releaseYear:r,type:n})=>U({url:V,params:{apiKey:"4c4cce9e",r:"json",i:t,t:e,type:n,y:r,plot:a}}),G=({search:e,page:t,releaseYear:a,type:r})=>U({url:V,params:{apiKey:"4c4cce9e",r:"json",s:e,type:r,y:a,page:t}});const H=({suggestions:e,query:t,onChange:a,placeholder:r="Search...",label:n="Search"})=>u.createElement(h,{freeSolo:!0,disableClearable:!0,options:null!=e?e:[],renderInput:e=>u.createElement(_,c(o({},e),{value:t,label:n,margin:"normal",variant:"outlined",onChange:e=>a(e.target.value),placeholder:r,InputProps:c(o({},e.InputProps),{type:"search"})}))});var X="_results_p0r97_10",Z="_noSearch_p0r97_17",ee="_grid_p0r97_22",te="_error_p0r97_42";var ae="_root_1mm6t_1",re="_favorite_1mm6t_8",ne="_imageWrapper_1mm6t_32",le="_image_1mm6t_32",se="_info_1mm6t_36",oe="/omdb-search/assets/no_picture_available.49f4a11c.png";const ce=({title:e,image:t,isFavorite:a,onFavorite:r,year:n,id:l,onClick:s})=>u.createElement(b,{className:ae,"data-id":l,onClick:s},u.createElement("div",{className:ne},u.createElement("div",{onClick:e=>{e.stopPropagation(),r()},className:re},a?u.createElement(S,{color:"primary"}):u.createElement(y,{color:"primary"}),u.createElement("span",null,a?"Remove":"Add")),u.createElement("img",{className:le,src:"N/A"===t?oe:t,alt:e})),u.createElement("div",{className:se},u.createElement("label",null,e),u.createElement("small",null,n)));function ie(e){const t={};for(const[a,r]of Object.entries(e))r&&(t[a]=r);return t}function me(){const e=()=>"app-favorites"in localStorage?JSON.parse(localStorage.getItem("app-favorites")):{},[t,a]=m.exports.useState(e());m.exports.useEffect((()=>(window.addEventListener("updated-favorites",r),()=>{window.removeEventListener("updated-favorites",r)})),[]);const r=()=>{console.log("storage"),a(e())};return{favorites:t,updateFavorites:(e,r)=>{let n={};n=ie(e in t?c(o({},t),{[e]:void 0}):o({[e]:r},t)),a(n),(e=>{const t=new Event("updated-favorites");localStorage.setItem("app-favorites",JSON.stringify(e)),window.dispatchEvent(t)})(n)}}}var ue="_loader_18rn4_1";const de=()=>u.createElement(u.Fragment,null,Array(20).fill(0).map(((e,t)=>u.createElement("div",{className:ue,key:`loader-${t}`},u.createElement(N,{height:"300px"}),u.createElement(N,{height:"20px",width:"90%"}),u.createElement(N,{height:"10px",width:"60%"})))));const pe=({onClick:e})=>{const{params:t,setSearch:a}=function(){const[e,t]=m.exports.useState({search:"",page:1}),a=w.exports.debounce((a=>{t(c(o({},e),{page:1,search:a}))}),500);return{params:e,setParams:t,setSearch:r=>{r?a(r):t(c(o({},e),{page:1,search:""}))}}}(),{favorites:r,updateFavorites:n}=me(),l=function(e){const[t,a]=m.exports.useState({isLoading:!1,results:0,items:[],isError:!1});return m.exports.useEffect((()=>{a({items:[],isLoading:Boolean(e.search),results:0,isError:!1}),e.search&&G(o({},e)).then((e=>{if("Error"in e)throw e.Error;a({items:e.Search,isLoading:!1,results:parseInt(e.totalResults),isError:!1})})).catch((e=>{console.error(e),a({items:[],isLoading:!1,results:0,isError:!0})}))}),[e.search,e.type,e.releaseYear,e.type]),t}(o({},t));return u.createElement("div",{className:E(X,{[Z]:!t.search})},u.createElement("header",null,u.createElement(H,{query:t.search,onChange:e=>{a(e)}})),u.createElement("div",{className:ee},l.isLoading?u.createElement(de,null):null,l.results>0?l.items.map(((t,a)=>u.createElement(ce,{id:t.imdbID,title:t.Title,image:t.Poster,year:t.Year,onFavorite:()=>n(t.imdbID,t.Title),isFavorite:t.imdbID in r,key:`${t.imdbID}-${a}`,onClick:()=>e(t.imdbID)}))):null),l.isError?u.createElement(k,{variant:"filled",severity:"error",className:te},"Could not find a match for this query, we suggest the following:",u.createElement("ul",null,u.createElement("li",null,"Make sure that what you types matches a movie tile"),t.search.length<3?u.createElement("li",null,"Query is probably to short, type more letters :)"):null)):null)};var Ee="_user_3d4cc_1",ge="_info_3d4cc_5",ve="_title_3d4cc_8",_e="_delete_3d4cc_12";const fe=({name:e,onLogout:t,className:a})=>u.createElement("div",{className:E(Ee)},u.createElement(C,null,u.createElement(x,null,u.createElement(I,null))),u.createElement("div",{className:ge},u.createElement("span",{className:ve},`Welcome ${e}!`),t?u.createElement("small",{className:_e,onClick:t},"Logout"):null));var he="_header_1t7ag_10",be="_buttons_1t7ag_19",ye="_main_1t7ag_26",Se="_results_1t7ag_26";var Ne="_menu_usvok_1",we="_name_usvok_1";const ke=({name:e,items:t,onClick:a})=>{const[r,n]=u.useState(null);return u.createElement("div",null,u.createElement(g,{onClick:e=>t.length>0&&n(e.target)},u.createElement("span",{className:we},e)),u.createElement(L,{className:Ne,keepMounted:!0,anchorEl:r,open:Boolean(r),onClose:()=>n(null)},t.map((e=>u.createElement(O,{onClick:t=>((e,t)=>{a(e,t),n(null)})(t,e.value),key:e.value},e.label)))))};var Ce="_badge_xow5w_1";const xe=({count:e})=>e?u.createElement(P,{color:"secondary",badgeContent:e,className:Ce},u.createElement(y,null)):u.createElement(y,null),Ie=({onClick:e})=>{const{favorites:t}=me(),a=m.exports.useMemo((()=>Object.entries(t).map((([e,t])=>({value:e,label:t})))),[t]);return u.createElement(ke,{name:u.createElement(xe,{count:a.length}),items:a,onClick:(t,a)=>{e(a)}})};function Le(e){const[t,a]=m.exports.useState({data:null,isError:!1,isLoading:!1});return m.exports.useEffect((()=>{a({isLoading:Boolean(e.imdbID),isError:!1,data:null}),e.imdbID&&z(o({},e)).then((e=>{a({data:e,isError:!1,isLoading:!1})})).catch((e=>{console.error(e),a({data:null,isLoading:!1,isError:!0})}))}),[e.imdbID,e.plot]),t}var Oe="_modal_159gp_1",Pe="_movie_159gp_5",De="_imageWrapper_159gp_8",je="_info_159gp_15";const Be=({onClick:e,isExpanded:t,description:a,loading:r})=>u.createElement("div",null,u.createElement("article",null,r?"Loading...":a),t?null:u.createElement(K,{onClick:e},"Show More...")),Fe=({id:e,onClose:t})=>{const[a,r]=m.exports.useState(),n=Le({imdbID:e}),l=Le({imdbID:a?e:"",plot:a});return u.createElement(Y,{open:Boolean(e),onClose:()=>{r(void 0),t()},className:Oe},u.createElement("div",{className:Pe},n.data?u.createElement("main",null,u.createElement("div",{className:De},u.createElement("img",{alt:n.data.Title,src:"N/A"===n.data.Poster?oe:n.data.Poster})),u.createElement("div",{className:je},u.createElement("label",null,n.data.Title),u.createElement("small",null,n.data.Year),u.createElement(D,{readOnly:!0,defaultValue:parseFloat(n.data.imdbRating)/2}),u.createElement(Be,{description:l.data?l.data.Plot:n.data.Plot,onClick:()=>r("full"),isExpanded:Boolean(a),loading:l.isLoading}))):null))},Me=()=>{const{value:e,clearStorage:t}=T("app-username"),[a,r]=m.exports.useState("");return u.createElement(u.Fragment,null,u.createElement("main",{className:ye},u.createElement("header",{className:he},u.createElement("h1",null,"Super Cool Movie Search Tool"),u.createElement("div",{className:be},u.createElement(Ie,{onClick:e=>r(e)}),u.createElement(fe,{name:e,onLogout:t}))),u.createElement("div",{className:Se},u.createElement(pe,{onClick:r}),u.createElement(Fe,{id:a,onClose:()=>r("")}))),u.createElement("footer",null))};function Te(){return function(){const{value:e}=T("app-username"),t=v();m.exports.useEffect((()=>{e||(t.push("/login"),localStorage.removeItem("app-favorites"))}),[t,e])}(),u.createElement(j,null,u.createElement(B,{path:"/login"},u.createElement(Q,null)),u.createElement(B,{path:"/"},u.createElement(Me,null)))}F.render(u.createElement(u.StrictMode,null,u.createElement(M,{basename:"/omdb-search"},u.createElement(Te,null))),document.getElementById("root"));
